[Whonix Homepage](https://sourceforge.net/p/whonix/wiki/Home/)

[TOC]

# Introduction #
Whonix can work together with any other suited Anonymizing Networks, either in addition, this means the other network will be tunneled through Tor. Also Tor can be completely exchanged with any other suited anonymizing network.

**Note that all networks differ in their threat model and security! Research before you start using them.**

# Rudimentary Whonix Support for Other Anonymizing Networks #
The [Whonix Framework](https://sourceforge.net/p/whonix/wiki/Security/#whonix-framework) is agnostic about which Anonymizing Network is being used. Whonix started with Tor as anonymizing network, because all developers were Tor users. The idea, that also other anonymizing network could be used, came much later.

At the moment Whonix's support for Other Anonymizing Networks is only rudimentary and not as good as supported like the Tor network. Of course Whonix developers respect other anonymizing networks, their developers and their users. They are simply more accustomed to the Tor network, which is also a personal preference. It's also very hard to be equally interested, educated and to stay up to date with all other anonymizing networks at the same time.

As soon as a new developer, who actively supports the other anonymizing network, joins the Whonix project, this particular anonymizing network can be equally supported like the Tor network. For example, there is not much point in separate a 'JonDoBOX', if most of the knowledge and code is shared.

# i2p anonymizing network #
Unfortunately it is not possible to reliably replace the Tor network with the [i2p network](http://www.i2p2.de). The i2p network is mainly designed to host all services inside the i2p network. We have to update the Whonix-Workstation's operating system and software packages. That is not possible with i2p. Outproxies existed in past (http, https and socks), but too few of them. And they are not suited for use with Whonix. They are too unreliable (too often offline). At the moment (March 2012) there are no working https or socks outproxies, which we could use for apt-get. I2p can be used as an addition to Whonix.

If you simply want to browse eepsites, see [using i2p inproxies on Whonix-Workstation](https://sourceforge.net/p/whonix/wiki/OtherAnonymizingNetworks/#browsing-eepsites-using-i2p-inproxies-on-whonix-workstation), otherwise you can also install i2p directly inside Whonix-Workstation or directly on the Whonix-Gateway.

## Browsing eepsites using i2p inproxies on Whonix-Workstation ##
There are several i2p inproxies, those are similar to [tor2web](https://trac.torproject.org/projects/tor/wiki/doc/tor2web). Simply use your Tor Browser.

Note, that you will loose the end-to-end encryption to the eepsites, which i2p would provide, if you would install it directly inside Whonix-Workstation, or if you would use it the ordinary way. Depending on if the inproxy uses http (unencrypted), http**s** (or is reachable through a hidden service), also [Exit Nodes Eavesdropping](https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO#ExitNodesEavesdropping) applies. In any case, the i2p inproxy admin can see, all your traffic into the i2p network and there is no way to prevent that. 
i2p inproxies:
* [awxcnx](https://www.awxcnx.de/tor-i2p-proxy2-en.htm)
* [6dyi4t72u7y6g763.onion](http://6dyi4t72u7y6g763.onion/)
* or simply add '.to' after '.i2p'. For example, instant of *http://forum.i2p* you can use *http://forum.i2p.to*.

## Installing i2p inside Whonix-Workstation (i2p over Tor) ##
It is possible to run i2p inside the Whonix-Workstation. 
Advantages: 

* Anonymity is provided by Tor.
* I2p webinterface works normal inside Tor Browser. No need to install a graphical user interface on the Whonix-Gateway.
* Eepsites (.i2p) can be reached directly from Tor Browser.
* I2p's end-to-end encryption will be used like usual.

Disadvantages: 

* Adds load to Tor.
* Adds load to i2p.
* It's slower than i2p directly on Whonix-Gateway or the ordinary usage.
* Incoming connections are not possible, because [Whonix's Tor Workstation is firewalled](https://sourceforge.net/p/whonix/wiki/Applications/#whonix-workstation-is-firewalled). ^1^ 
* No contribution (leaching) to the i2p network. ^2^ 

<font size="-3">
,,
^1^ If you know to use a hidden service, please add this information.
^2^ Sounds worse than it is. Only very little people are expected to use i2p over Tor. I2p offers those options itself. It's not like a leeching mod.
</font>

Recommend settings:

* Tor Browser
    * Use a second instance of the Tor Browser, [multiple VM Snapshots](https://sourceforge.net/p/whonix/wiki/Security/#recommendation-to-use-multiple-vm-snapshots) or [multiple Whonix-Workstations](https://sourceforge.net/p/whonix/wiki/Security/#using-multiple-whonix-workstations)
    * Add http proxy IP: 127.0.0.1 port: 4444 in Tor Browser's Tor Button.
* Network
    * IP configuration: hidden mode (do not publish IP) (There is no need to publish the exit node's IP address.)
    * UDP-Port: completely disable (Not supported by Tor.)
    * TCP: disable inbound (Firewalled) (Only outgoing TCP supported by Whonix.)
* Tunnels
    * length (all tunnels): inbound and outbound: 0 (It's faster and less connection interrupts. Anonymity is already provided by Tor. No need to leech from Tor/i2p.)

## Installing i2p on Whonix-Gateway (i2pBOX) ##
Development stalled due to lack of interest from Whonix developers and ip2 community. Development thread: [Dev] "Support for i2p WAIT for contributors/more mature upstream"; [i2p thread](http://forum.i2p2.de/viewtopic.php?t#7037). Anyone feel free it take it.

# JonDonym #
Be aware, that the [JonDonym network](https://anonymous-proxy-servers.net) is much smaller than the Tor network. However, JonDonym might be faster. In some aspects JonDonym is more/less secure than Tor. Depends on your thread model. Read the [network comparison](https://anonymous-proxy-servers.net/en/help/jondonym.html). Also note [law enforcement](http://anonymous-proxy-servers.net/en/law_enforcement.html).

## adrelanos's JonDonym opinion ##
Tunneling JonDonym over Tor makes sense in some cases. I wouldn't do it for a longer amount of time, as it adds a permanent exit server. (See [Tor plus VPN or proxy](https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN) for background.) Tor suffers from a few [bad relays](https://trac.torproject.org/projects/tor/wiki/doc/badRelays), as the servers are run by volunteers and a few of them are evil. There is [Exit Nodes Eavesdropping](https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO#ExitNodesEavesdropping) (applies only to unencrypted traffic). Even worse, exit nodes may try to defeat SSL using sslstrip (google it, read, watch some demonstration videos) (or other tools). And/or they inject malware into the data stream. Conclusion: if you want to download something, which you can not download over SSL (and if there are also no hash sums or signatures), the JonDo exit is more trustable than a random Tor exit. Alternatively you can also use .exit, to force the use of a specific Tor exit node, which you trust more than a random one.

## JonDonym over Tor inside Whonix-Workstation ##
You can tunnel JonDonym over Tor. This could be useful, to circumvent Tor bans. But note [Tor Plus VPN or Proxy](https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN) (it adds a permanent exit node, like explained and the article). Not many changes are required. [download](https://anonymous-proxy-servers.net/en/software.html) and install it as usual. You need 'JonDo ? the IP changer', either as the gui or console version. You can decide, if you prefer to use JonDoFox or the Tor Browser. If you want to use the Tor Browser, see their [help section](http://anonymous-proxy-servers.net/en/get-help.html) on how to point Firefox to JonDo.

## JonDonym as Tor replacement (JonDoBOX) ##
**Not finished yet.**

The sources might contain additional helpful information:

* The [Dev] "SupportforJonDo Whonix dev thread about JonDonym"
* The [thread in the JonDonym forum](https://anonymous-proxy-servers.net/forum/viewtopic.php?f#10&t#6680&sid#24b1980990c5ae69e021bc998c878370)
* [JonDonym transocks_ev](https://anonymous-proxy-servers.net/en/help/transocks.html)
* [JonDoDaemon for Debian](https://anonymous-proxy-servers.net/wiki/index.php/JonDoDaemon_for_Debian)

Depending on your threat model (see [Security]), [JonDonym](https://anonymous-proxy-servers.net/) can be potentially used as a replacement for Tor. Prefer the [console version](https://anonymous-proxy-servers.net/wiki/index.php/JonDoDaemon_for_Debian) of 'JonDo ? the IP changer', otherwise you would have to install a desktop environment, which needs a lot more RAM, CPU and disc space (not possible on most embedded devices).

Free users can [only only use port 80 (http) and 443 (https)](https://shop.anonymous-proxy-servers.net/bin/payment?lang#en#vorteile). Socks is [only available for paying premium users](https://anonymous-proxy-servers.net/en/help/about.html). Therefore free users can only reach services listening on remote port 80 or 443. Normal browsing will work, other stuff, for example IRC on port 6667 will not work. Paying premium users can use all services.

In comparison to Tor, JonDo does not offer a TransPort or DnsPort. For that reason, transocks_ev [(download here)](https://anonymous-proxy-servers.net/en/help/transocks.html) is needed. Note, that you can not use the firewall rules provided [under transocks_ev](https://anonymous-proxy-servers.net/en/help/transocks.html). You need to adjust the whonix  firewall (/usr/local/bin/whonix_firewall).

# RetroShare #
In fact [RetroShare](http://retroshare.sourceforge.net) is not an [anonymizing network](https://en.wikipedia.org/wiki/Anonymizer), it is a [friend-to-friend](https://en.wikipedia.org/wiki/Friend-to-friend) (F2F) network, or optionally a [darknet](https://en.wikipedia.org/wiki/Darknet_(file_sharing)). RetroShare has a very different audience and thread model. RetroShare does not support using an outproxy yet, for this reason, it can not replace Tor on the Whonix-Gateway. It can be used inside the Whonix-Gateway. This enables you, to do things, which are normally potentially dangerous, such as adding random people (from a forum), while staying anonymous. (For example, to join a RetroShare forum.)

## RetroShare over Tor ##
After adding tons of random "friends" from a public forum, I could connect to a very few people over TCP. Approximately only 5% were online. Although I can probable see only a very small portion of the network, the content of the network looks pretty interesting.

RetroShare reports Right click -> DHT Details: 
NET WARNING No DHT; Behind NAT UNKNOWN NAT STATE MANUAL FORWARD

Chance of working better (**untested**): [Tunneling UDP over Tor](https://sourceforge.net/p/whonix/wiki/TunnelUDPoverTor/). Note, that [Other Anonymizing Networks over Tor UDP Tunnel](https://sourceforge.net/p/whonix/wiki/Applications/#other-anonymizing-networks-over-tor-udp-tunnel) applies.

# Freenet #
## Using a gateway (inproxy) inside your Whonix-Workstation ##
A [freenet gateway](http://www.student.nada.kth.se/~md98-osa/gateway.html). Still working? How to use?

## Freenet inside the Whonix-Workstation (Freenet over Tor) ##
In "classical sense" (directly and only over Tor) this is impossible. This is tested, freenet installs normally, but even with lowest security settings, connection will never be established. The problem is, that Tor does not support UDP. (There has been a [discussion](http://comments.gmane.org/gmane.network.freenet.support/8211) about this topic. Although it's from 2008, it doesn't look like, the situation has changed or will change.)

Workaround (tested): [Tunneling UDP over Tor](https://sourceforge.net/p/whonix/wiki/TunnelUDPoverTor/). Note, that [Other Anonymizing Networks over Tor UDP Tunnel](https://sourceforge.net/p/whonix/wiki/Applications/#other-anonymizing-networks-over-tor-udp-tunnel) applies.

Another workaround: Buy, administrate and connect the SSH server anonymously though your Whonix-Workstation. Install freenet on the remote location and connect from your Whonix-Workstation (SSL or SSH tunnel). See the freenet wiki for more information.

## Freenet on the Whonix-Gateway (FreenetBOX) ##
Can be also potentially only be used parallel to Tor. It's impossible to tunnel Freenet through Tor (see above). Also replacing Tor with Freenet is impossible, as freenet is a separated network, not designed to exit the network. Apt-get couldn't work.

Not written yet.

# VPN #
**Not finished yet.** ***UNTESTED!*** [Dev] "#SupportforVPNsasTorreplacementOPTIONALFEATURE dev thread"

Read first: [A Free example VPN working with Whonix for testing purposes](https://sourceforge.net/p/whonix/wiki/OptionalConfigurations/#a-free-example-vpn-working-with-whonix-for-testing-purposes).

## Fail Closed Mechanism ##
If you simply add a VPN using common instructions, it generally fails open. That means, if the VPN breaks down, traffic will be send without the VPN.

It's much safer when it fails closed, i.e. when the VPN connection breaks down, the whole internet connection is down as long as the VPN connection isn't restored or as long the routing table isn't manually and knowingly modified.

There are some weak alternative ways to do this. Some "VPN-Monitor" check every, let's say 500 ms, if the VPN IP is still valid, if not, kill a list of applications. This is not very secure, it's a game if that time period is sufficient to stop a leak and if killing the applications is fast enough.

Another more serious option would be to use iptables rules, allow only traffic to the VPN server and to no other targets. This maybe additionally implemented later. However, using iptables for this scenario isn't the most secure option. When the IP of the VPN service gets assigned to another server, you could end up connecting to a malicious server.

The most secure option is to modify the routing table.

[source](http://cranthetrader.blogspot.de/2011/10/dont-allow-non-vpn-traffic.html), Windows related but the routing stuff is valid for Linux as well.

## VPN's in addition to Tor ##
It is already possible to Tunnel Tor VPN or to Tunnel VPN through Tor], or a combination of both methods. (See [OptionalConfigurations].)

## VPN's as a Tor replacement (VPNBOX) ##
**Not finished yet.** ***UNTESTED!*** [Dev] "#SupportforVPNsasTorreplacementOPTIONALFEATURE dev thread"

In this chapter we explain, how you can replace Tor with a VPN. Regarding security see 'Introduction' on this page at the top. It's your responsibility to find a (non-logging, safe) free/paid VPN provider or to stick with Tor.

(1). Test if your host internet connection is working.

(2). Test if your tor internet connection is working.

(3). Store your routing table before starting the VPN and before modifying anything. Type in console:

    route

(4). Start VPN.

    sudo openvpn /etc/openvpn/client.conf

(5). Test if your ISP IP gets replaced with the VPN IP.

(6). Store the modified routing table. Type in console:

    route

(7). Delete your default route and set your new default route to the virtual VPN network adapter.

    sudo route del default
    sudo route add default dev tun0

(8). Test if your VPN IP is still valid.

(9). Store the modified routing table. Type in console:

    route

(10). For testing purposes, kill your OpenVPN connection.

    sudo killall openvpn

(11). Test if you can NOT connect to anything anymore. That's the whole point to prevent any leaks in the clear.

TODO: 
- Testing. 
- Autostart everything. 
- Use up in /etc/network/interfaces. 
- Final step: forwarding traffic from the Workstation to the Gateway.
- extra: VPNchains (two or more independent VPN providers in a chain)

**Not finished yet.** ***UNTESTED!***

# Proxy #
Required reading: 

* [proxy](https://trac.torproject.org/projects/tor/wiki/doc/proxy)
* [Tor + VPN or Proxy](https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN#VPNSSHversusProxy)

## Proxies in addition to Tor ##
See [Advantages of Whonix](https://sourceforge.net/p/whonix/wiki/Security/#advantages-of-whonix), "It is possible to use Whonix setup in conjunction with VPNs, ssh and other proxies....".

## Proxies as a Tor replacement (ProxyBOX) ##
**Not finished yet.**

[Dev] "#SupportforproxiesasTorreplacementOPTIONALFEATURE dev thread"

It is possible to replace Tor with local or remote proxies. Note that anonymity is sufficiently lower with (single hop) proxies. The difficulty is, that most proxies lack a TransPort and DnsPort.

It also depends, what kind of proxy you want to use.

See also [Transparent Proxying](https://sourceforge.net/p/whonix/wiki/OptionalConfigurations/#transparent-proxying) (Describes Transparent Proxying inside Whonix-Workstation to an extra proxy, i.e. Whonix-Workstation -> Tor -> Proxy.)

There are two options available. 1. Transparent Proxying Method or 2. The Proxy Settings Method.

### Depending on Proxy type ###
http proxies are not suited, because we would not be able to connect to https protected websites. The setup for https, socks4(a)/5 proxies should be very similar.

### Transparent Proxying Method ###
**Not finished.**

Transparent Proxying (like Whonix with Tor's TransPort) is, due to technical limitations, not fully supported by proxies. Proxies do not offer a DnsPort and also do not act as a DNS server. While it's possible to relay TCP and UDP traffic through the proxy on the IP level (using iptables), you would still always require known (you know the IP) DNS server. (i.e. public DNS server such as OpenDNS, Google, httpsdnsd) DNS resolution would look like: Proxy-Workstation -> Proxy-Gateway -> Proxy -> DNS server. It's technically not possible to let the proxy transparently (!) do the DNS resolution (no tools available) - at least not that we know after extended research know of. This is because proxies offer hostname resolution, but not DNS. (Sources: Leonid Evdokimov (author of [redsocks](https://github.com/darkk/redsocks)) on mailing list, [Transparent Proxy, DNS, without public DNS server](http://librelist.com/browser//redsocks/2012/5/15/transparent-proxy-dns-without-public-dns-server/#e8cb0f54932856f1c0cc9259e24cb089); [Bernd Holzmüller](http://tiggerswelt.net/Ueber%20uns/impressum/) (author of [http://oss.tiggerswelt.net/transocks_ev/ transocks_ev]) by e-mail) This technical limitation may be lifted if redsocks [Feature Request: fake DNS resolver](https://github.com/darkk/redsocks/issues/23) gets implemented.

Due to the DNS issue, you can't completely hide behind the proxy (using it transparently). You always would have to reveal, that you are using a public (or private) extra DNS resolver. Of course, you would also not only have to trust the proxy, but also the extra DNS server, which can see, log and correlate all your DNS queries.

For TCP and UDP: Proxy-Workstation -> Proxy-Gateway -> network layer -> redsocks -> proxy 
For DNS: Proxy-Workstation -> Proxy-Gateway -> network layer -> redsocks -> proxy -> public DNS server 

### Proxy Settings Method ###
**Not finished.**

Design: The Proxy-Workstation is on an isolated internal LAN (similar to Whonix's Whonix-Workstation design) and can't connect to the internet directly. (Iptables rules on the Proxy-Gateway forbid that.) All applications installed inside the Proxy-Workstation have to use the correct [proxy settings](https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO#classicalcommonway:usetheapplicationsproxysettings) or a [wrapper](https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO#notsocommon:useawrapper:forcetheapplicationtouseaproxytorsocksusewithtor).

For TCP, UDP and DNS: Proxy-Workstation -> Proxy-Gateway -> proxy